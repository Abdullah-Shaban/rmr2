<!DOCTYPE html>
<!-- saved from url=(0014)about:internet -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>What&#39;s new in 2.2.0</title>

<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 12px;
   margin: 8px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 { 
   font-size:2.2em; 
}

h2 { 
   font-size:1.8em; 
}

h3 { 
   font-size:1.4em; 
}

h4 { 
   font-size:1.0em; 
}

h5 { 
   font-size:0.9em; 
}

h6 { 
   font-size:0.8em; 
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre {	
   margin-top: 0;
   max-width: 95%;
   border: 1px solid #ccc;
   white-space: pre-wrap;
}

pre code {
   display: block; padding: 0.5em;
}

code.r, code.cpp {
   background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * { 
      background: transparent !important; 
      color: black !important; 
      filter:none !important; 
      -ms-filter: none !important; 
   }

   body { 
      font-size:12pt; 
      max-width:100%; 
   }
       
   a, a:visited { 
      text-decoration: underline; 
   }

   hr { 
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote { 
      padding-right: 1em; 
      page-break-inside: avoid; 
   }

   tr, img { 
      page-break-inside: avoid; 
   }

   img { 
      max-width: 100% !important; 
   }

   @page :left { 
      margin: 15mm 20mm 15mm 10mm; 
   }
     
   @page :right { 
      margin: 15mm 10mm 15mm 20mm; 
   }

   p, h2, h3 { 
      orphans: 3; widows: 3; 
   }

   h2, h3 { 
      page-break-after: avoid; 
   }
}

</style>





</head>

<body>
<h1>What&#39;s new in 2.2.0</h1>

<p>We are starting to see user feedback driving feature development, and that is a good thing.</p>

<h2>Control read size</h2>

<p>When reading binary formats, rmr2 reads a certain number of bytes, checks they contain at least <code>rmr.options(&quot;keyval.length&quot;)</code> records, then reads more if necessary or passes them to user code. The read size is adjusted so as to read the desired number of records in one shot, on average. You can now control the initial value of the read size if you need tighter control on how many records are processed in a map call if, say, are hitting memory or timeout limits. To achieve that, use <code>rmr.options(read.size = ideal.size.in.bytes)</code>. I can see reasons why people would want to control this and <code>keyval.length</code> on a job by job basis, but I am also wary of making the <code>mapreduce</code> interface more complicated. Let us know what you think.</p>

<h2><code>rmr.str</code> returns its argument</h2>

<p>The small utility call to safely print expression values and stack information in standard error now returns its argument on top of doing its regular job, making for less intrusive code changes. For instance if you have a map function <code>function(k,v) keyval(k, v/2)</code> and you wonder what&#39;s going on you can change that to <code>function(k,v) rmr.str(keyval(k, v/2))</code> keeping the semantics of the function intact while adding useful information to stderr.</p>

<h2>Input and output formats for equijoins</h2>

<p>On a specific user request, IO formats for equijoins. They work just like IO formats in mapreduce.</p>

<h2>Options to RScript</h2>

<p>On a specific user request, you can now change the command that is used to run the map and reduce programs. This defaults to &ldquo;Rscript&rdquo; and it&#39;s highly recommended you keep using Rscript unless you really know what you are doing. Some users though, while still using Rscript, wanted to provide options to control memory usage and other performance related options. Use <code>rmr.options(rscript.cmd = some.cmd.line)</code> to do this. Advanced use only. You can do a lot of damage with this.</p>

<h2>Configure HDFS tempdir</h2>

<p>Again based on user feedback, you can now change the temp directory used on the distributed file system with <code>rmr.options(dfs.tempdir = some.dfs.path)</code>. Until now it just used the value returned by <code>tempdir()</code>, which is valid for the local file system but not necessarily for the distibuted one (still the default). Trying to find a common ground was a useless exercise in compromise: the two settings should be decoupled and they can be now.</p>

</body>

</html>

